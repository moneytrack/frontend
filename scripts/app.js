!function e(t,a,n){function r(o,i){if(!a[o]){if(!t[o]){var l="function"==typeof require&&require;if(!i&&l)return l(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=a[o]={exports:{}};t[o][0].call(u.exports,function(e){var a=t[o][1][e];return r(a?a:e)},u,u.exports,e,t,a,n)}return a[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/CategoryPicker.jsx":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("react"),s=n(r),o=s["default"].createClass({displayName:"CategoryPicker",propTypes:{rootCategoryId:s["default"].PropTypes.number,categoryList:s["default"].PropTypes.arrayOf(s["default"].PropTypes.object),allowEmpty:s["default"].PropTypes.bool,value:s["default"].PropTypes.number},onChange:function(e){this.props.onChange(e)},renderRecurse:function(e,t){var a=this,n=e.slice().sort(function(e,t){return e.order-t.order});return n.map(function(e){var n=e.childIdList.map(function(e){return a.props.categoryList.filter(function(t){return t.id===e})[0]}),r=["category-picker__category"];a.props.value===e.id&&r.push("category-picker__category--selected"),r=r.join(" ");var o={paddingLeft:5+20*t+"px"};if(n.length>0){var i=n.length>0?a.renderRecurse(n,t+1):"";return[s["default"].createElement("div",{key:e.id,className:r,style:o,onClick:function(){return a.onChange(e.id)}},s["default"].createElement("div",{className:"category-picker__category__title"},e.title)),i]}return[s["default"].createElement("div",{key:e.id,className:r,style:o,onClick:function(){return a.onChange(e.id)}},s["default"].createElement("div",{className:"category-picker__category__title"},e.title))]})},render:function(){var e=this,t=this.props.categoryList.filter(function(t){return t.parentId===e.props.rootCategoryId}),a=this.renderRecurse(t,0);if(this.props.allowEmpty){var n=["category-picker__category"];null===this.props.value&&n.push("category-picker__category--selected"),n=n.join(" "),a.unshift(s["default"].createElement("div",{key:"empty",className:n,onClick:function(){return e.onChange(null)}},s["default"].createElement("div",{className:"category-picker__category__empty category-picker__category__title"},this.props.emptyText||"Not selected")))}return s["default"].createElement("div",{className:"category-picker"},a)}});a["default"]=o},{react:"react"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/ConfirmDialog.jsx":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("react"),s=n(r),o=e("./ModalContainer"),i=n(o),l=s["default"].createClass({displayName:"ConfirmDialog",render:function(){return s["default"].createElement(i["default"],{visible:this.props.visible},s["default"].createElement("div",{className:"confirm-dialog"},s["default"].createElement("div",{className:"confirm-dialog__msg"},"Are you sure?"),s["default"].createElement("div",{className:"confirm-dialog__controls"},s["default"].createElement("button",{type:"button",onClick:this.props.onYes},"Yes"),s["default"].createElement("button",{type:"button",onClick:this.props.onNo},"No"))))}});a["default"]=l},{"./ModalContainer":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/ModalContainer.jsx",react:"react"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/DateTimePicker.jsx":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("react"),s=n(r),o=e("react-addons-update"),i=n(o),l=e("input-moment"),c=n(l),u=e("moment"),d=n(u),f=e("./ModalContainer"),m=n(f),p=e("./DropDownContainer"),h=(n(p),s["default"].createClass({displayName:"DateTimePicker",getInitialState:function(){return{visible:!1}},onCancel:function(){this.setState((0,i["default"])(this.state,{visible:{$set:!1}}))},onClick:function(){this.setState((0,i["default"])(this.state,{visible:{$set:!this.state.visible}}));var e=(0,d["default"])(this.props.value.timestamp);this.props.onChange((0,i["default"])(this.props.value,{moment:{$set:e}}))},onChangeDate:function(e){this.props.onChange((0,i["default"])(this.props.value,{moment:{$set:e}}))},onSaveDate:function(){var e=this.props.value.moment.valueOf();this.props.onChange((0,i["default"])(this.props.value,{timestamp:{$set:e}})),this.setState((0,i["default"])(this.state,{visible:{$set:!1}}))},render:function(){var e=this.props.value,t=e.timestamp,a=e.moment;return s["default"].createElement("div",null,s["default"].createElement("input",{onClick:this.onClick,value:(0,d["default"])(t).format("MM.DD HH:mm:ss"),readOnly:!0}),this.state.visible?s["default"].createElement(m["default"],{onCancel:this.onCancel},s["default"].createElement(c["default"],{moment:a,onChange:this.onChangeDate,onSave:this.onSaveDate})):s["default"].createElement("span",null))}}));h.contextTypes={store:s["default"].PropTypes.object},h.wrapState=function(e){return{timestamp:e,moment:(0,d["default"])(e)}},h.unwrapState=function(e){return e.timestamp},a["default"]=h},{"./DropDownContainer":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/DropDownContainer.jsx","./ModalContainer":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/ModalContainer.jsx","input-moment":"input-moment",moment:"moment",react:"react","react-addons-update":"react-addons-update"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/DropDownContainer.jsx":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("react"),s=n(r),o=s["default"].createClass({displayName:"DropDownContainer",render:function(){return this.props.visible!==!1?s["default"].createElement("div",{className:"drop-down-container"},s["default"].createElement("div",{className:"drop-down-container__bg"}),s["default"].createElement("div",{className:"drop-down-container__body"},this.props.children)):null}});a["default"]=o},{react:"react"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/EditCategoryList.jsx":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("react"),s=n(r),o=e("react-dom"),i=(n(o),e("react-addons-update")),l=n(i),c=e("./arrays"),u=e("./ModalContainer"),d=n(u),f=(s["default"].createClass({displayName:"RenameModal",render:function(){return s["default"].createElement(d["default"],{visible:this.props.editing,onCancel:this.props.onEditCanceled,onSave:this.props.onEditFinished},s["default"].createElement("label",null,"New name: ",s["default"].createElement("input",{value:this.props.editingText,onChange:this.onEdit,ref:"title_edit_input"})),s["default"].createElement("button",{onClick:this.onEditFinished},"Save"))}}),s["default"].createClass({displayName:"EditCategoryList",getInitialState:function(){return{mode:null,renamingId:null,renamingText:null,newCategoryTitle:null,newCategoryParentId:null}},onRenameBegin:function(e){this.setState((0,l["default"])(this.state,{mode:{$set:"RENAME"},renamingId:{$set:e.id},renamingText:{$set:e.title}}))},onRenameFinished:function(e){""!==this.state.renamingText&&(this.props.onRenameCategory(this.state.renamingId,this.state.renamingText),this.setState((0,l["default"])(this.state,{mode:{$set:null}})))},onRenameCanceled:function(e){this.setState((0,l["default"])(this.state,{mode:{$set:null}}))},onRename:function(e){this.setState((0,l["default"])(this.state,{renamingText:{$set:e.target.value}}))},onMoveBegin:function(e){this.setState((0,l["default"])(this.state,{mode:{$set:"MOVE"},moveCategoryId:{$set:e.id},moveOldParentId:{$set:e.parentId},moveNewParentId:{$set:e.parentId}}))},onMoveFinished:function(e){-1!==this.state.moveNewParentId&&(console.log("state",this.state),this.props.onMoveCategory(this.state.moveCategoryId,this.state.moveNewParentId),this.setState((0,l["default"])(this.state,{mode:{$set:null}})))},onMoveCanceled:function(e){this.setState((0,l["default"])(this.state,{mode:{$set:null}}))},onMoveParentChange:function(e){this.setState((0,l["default"])(this.state,{mode:{$set:"MOVE"},moveNewParentId:{$set:parseInt(e.target.value)}}))},onMove:function(e,t){var a=parseInt(t.target.value);e>=0&&this.props.onMoveCategory(e,a)},onNewCategoryBegin:function(e){this.setState((0,l["default"])(this.state,{mode:{$set:"NEW_CATEGORY"},newCategoryTitle:{$set:""},newCategoryParentId:{$set:e.id}}))},onNewCategoryCanceled:function(){this.setState((0,l["default"])(this.state,{mode:{$set:""}}))},onNewCategoryTitleChange:function(e){this.setState((0,l["default"])(this.state,{newCategoryTitle:{$set:e.target.value}}))},onNewCategoryFinished:function(){""!==this.state.newCategoryTitle&&(this.props.onNewCategory(this.state.newCategoryTitle,this.state.newCategoryParentId),this.setState((0,l["default"])(this.state,{mode:{$set:""}})))},onDeleteBegin:function(e){var t=this.context.store.getState(),a=t.history,n=a.filter(function(t){return t.categoryId===e.id});0===n.length?this.props.onDeleteCategory(e.id):this.setState((0,l["default"])(this.state,{mode:{$set:"DELETE"},deleteId:{$set:e.id}}))},onDeleteCanceled:function(){this.setState((0,l["default"])(this.state,{mode:{$set:""}}))},onDeleteFinished:function(){""!==this.state.newCategoryTitle&&(this.props.onDeleteCategory(this.state.deleteId),this.setState((0,l["default"])(this.state,{mode:{$set:""}})))},renderRecurse:function(e,t){var a=this,n=this.context.store.getState(),r=n.categoryList,o=n.rootCategoryId,i=(r.filter(function(e){return e.id===o})[0],e.slice().sort(function(e,t){return e.order-t.order}));return i.map(function(e){var n=e.childIdList.map(function(e){return r.filter(function(t){return t.id===e})[0]}),o=["edit-category-list__category"];o=o.join(" ");var i=null;if(n.length>0){var l=n.length>0?a.renderRecurse(n,t+1):"";i=s["default"].createElement("div",{key:e.id+"-children",className:"edit-category-list__children"},l)}return[s["default"].createElement("div",{key:e.id,className:o},s["default"].createElement("div",{className:"edit-category-list__category__content"},s["default"].createElement("div",{className:"edit-category-list__category__title"},e.title)," ",s["default"].createElement("div",{className:"edit-category-list__category__controls"},s["default"].createElement("i",{title:"Rename...",onClick:function(t){return a.onRenameBegin(e)},className:"icon icon-pen icon1x","aria-hidden":"true"}),s["default"].createElement("i",{title:"Add sub category...",onClick:function(t){return a.onNewCategoryBegin(e)},className:"icon icon-plus icon1x","aria-hidden":"true"}),s["default"].createElement("i",{title:"Move...",onClick:function(t){return a.onMoveBegin(e)},className:"icon icon-reply icon1x","aria-hidden":"true"}),s["default"].createElement("i",{title:"Delete...",onClick:function(t){return a.onDeleteBegin(e)},className:"icon icon-trash_can icon1x warning","aria-hidden":"true"})))),i]})},render:function(){function e(t,a){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];if(t.id==a)return[];for(var o="",i=0;n>i;++i)o+=String.fromCharCode(parseInt("00A0",16)),o+=String.fromCharCode(parseInt("00A0",16));var l=[s["default"].createElement("option",{value:t.id,key:t.id},o+t.title)];return t.childIdList.map(function(t){var s=(0,c.find)(r,function(e){return e.id===t});return e(s,a,n+1)}).forEach(function(e){return e.forEach(function(e){l.push(e)})}),l}var t=this,a=this.context.store.getState(),n=a.rootCategoryId,r=a.categoryList,o=a.history,i=r.filter(function(e){return e.id===n})[0],l=r.filter(function(e){return e.parentId===n}),u=this.renderRecurse(l,0);if(this.props.allowEmpty){var f=["edit-category-list__category"];null===this.props.value&&f.push("edit-category-list__category--selected"),f=f.join(" "),u.unshift(s["default"].createElement("div",{key:"empty",className:f},s["default"].createElement("div",{className:"edit-category-list__empty"},"Do not filter by category")))}var m=function(e){e&&e.focus()},p=o.filter(function(e){return e.categoryId===t.state.deleteId}).length;return s["default"].createElement("div",{className:"edit-category-list"},s["default"].createElement(d["default"],{visible:"RENAME"===this.state.mode,onCancel:this.onRenameCanceled,onSave:this.onRenameFinished},s["default"].createElement("label",null,"New title: ",s["default"].createElement("input",{value:this.state.renamingText,onChange:this.onRename,ref:m})),s["default"].createElement("button",{onClick:this.onRenameFinished,disabled:""===this.state.renamingText},"Save"),s["default"].createElement("button",{onClick:this.onRenameCanceled},"Cancel")),s["default"].createElement(d["default"],{visible:"NEW_CATEGORY"===this.state.mode,onCancel:this.onNewCategoryCanceled,onSave:this.onNewCategoryFinished},s["default"].createElement("label",null,"New category title: ",s["default"].createElement("input",{value:this.state.newCategoryTitle,onChange:this.onNewCategoryTitleChange,ref:m})),s["default"].createElement("button",{onClick:this.onNewCategoryFinished,disabled:""===this.state.newCategoryTitle},"Save"),s["default"].createElement("button",{onClick:this.onNewCategoryCanceled},"Cancel")),s["default"].createElement(d["default"],{visible:"MOVE"===this.state.mode,onCancel:this.onMoveCanceled,onSave:this.onMoveFinished},s["default"].createElement("label",null,"Move to:"," ",s["default"].createElement("select",{onChange:this.onMoveParentChange,value:this.state.moveNewParentId},e(i,this.state.moveCategoryId))),s["default"].createElement("button",{onClick:this.onMoveFinished,disabled:this.state.moveNewParentId===this.state.moveOldParentId},"Save"),s["default"].createElement("button",{onClick:this.onMoveCanceled},"Cancel")),s["default"].createElement(d["default"],{visible:"DELETE"===this.state.mode,onCancel:this.onDeleteCanceled,onSave:this.onDeleteFinished},s["default"].createElement("div",{className:"modal-container__msg warning"},"Are you sure that you want to delete this category?"),s["default"].createElement("div",{className:"modal-container__msg warning"},p>0?p>1?"You have "+p+" expenses in this category, all of them will be deleted too!":"You have 1 expense in this category, it will be removed too!":null),s["default"].createElement("div",{className:"modal-container__controls"},s["default"].createElement("button",{className:"warning",onClick:this.onDeleteFinished},"Delete"),s["default"].createElement("button",{onClick:this.onDeleteCanceled},"Cancel"))),u,s["default"].createElement("div",{className:"edit-category-list__new-root-category"},s["default"].createElement("a",{href:"#",className:"pseudo edit-category-list__new-root-category__link",onClick:function(e){return t.onNewCategoryBegin(i)}},"Add new root category...")))}}));f.contextTypes={store:s["default"].PropTypes.object},a["default"]=f},{"./ModalContainer":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/ModalContainer.jsx","./arrays":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/arrays.js",react:"react","react-addons-update":"react-addons-update","react-dom":"react-dom"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/EditExpense.jsx":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("react"),s=n(r),o=e("react-addons-update"),i=n(o),l=e("./NumberInput.jsx"),c=n(l),u=e("./CategoryPicker.jsx"),d=n(u),f=e("./DateTimePicker.jsx"),m=n(f),p=e("moment"),h=n(p),y=s["default"].createClass({displayName:"EditExpense",getInitialState:function(){var e=this,t=this.context.store.getState(),a=t.rootCategoryId,n=t.categoryList,r=t.history;if("undefined"!=typeof this.props.expenseId){var s=r.filter(function(t){return t.id===e.props.expenseId})[0];return{id:s.id,amount:c["default"].wrapState(s.amount/100),categoryId:s.categoryId,date:m["default"].wrapState(s.date),comment:s.comment,mode:"EDIT"}}var o=n.sort(function(e,t){return e.order-t.order}).filter(function(e){return e.parentId===a}),i=o.length>0?o[0].id:-1;return{amount:c["default"].wrapState(0),categoryId:i,date:m["default"].wrapState((0,h["default"])().valueOf()),comment:"",mode:"NEW"}},onSubmit:function(e){if(e.preventDefault(),"NEW"===this.state.mode)this.props.onAdd({amount:Math.floor(100*c["default"].unwrapState(this.state.amount)),categoryId:this.state.categoryId,comment:this.state.comment,date:m["default"].unwrapState(this.state.date)}),this.setState(this.getInitialState());else{if("EDIT"!==this.state.mode)throw new Error("Illegal mode: "+this.state.mode);this.props.onSave({id:this.state.id,amount:Math.floor(100*c["default"].unwrapState(this.state.amount)),categoryId:this.state.categoryId,comment:this.state.comment,date:m["default"].unwrapState(this.state.date)})}},onAmountChange:function(e){this.setState((0,i["default"])(this.state,{amount:{$set:e}}))},onChangeComment:function(e){this.setState((0,i["default"])(this.state,{comment:{$set:e.target.value}}))},onChangeDate:function(e){this.setState((0,i["default"])(this.state,{date:{$set:e}}))},onChangeCategory:function(e){this.setState((0,i["default"])(this.state,{categoryId:{$set:e}}))},onNewCategory:function(e,t){this.props.onAddCategory({title:e,parentId:t})},onCancel:function(){this.props.onCancel()},render:function(){return s["default"].createElement("form",{onSubmit:this.onSubmit,className:"edit-expense"},s["default"].createElement("div",{className:"edit-expense__row"},s["default"].createElement("table",null,s["default"].createElement("tbody",null,s["default"].createElement("tr",null,s["default"].createElement("td",{className:"edit-expense__field__label"},"Amount: ")),s["default"].createElement("tr",null,s["default"].createElement("td",{className:"edit-expense__field__input"},s["default"].createElement(c["default"],{value:this.state.amount,onChange:this.onAmountChange}))),s["default"].createElement("tr",null,s["default"].createElement("td",{className:"edit-expense__field__label"},"Date:")),s["default"].createElement("tr",null,s["default"].createElement("td",{className:"edit-expense__field__input"},s["default"].createElement(m["default"],{value:this.state.date,onChange:this.onChangeDate}))),s["default"].createElement("tr",null,s["default"].createElement("td",{className:"edit-expense__field__label"},"Comment:")),s["default"].createElement("tr",null,s["default"].createElement("td",{className:"edit-expense__field__input"},s["default"].createElement("textarea",{value:this.state.comment,onChange:this.onChangeComment,rows:"3"}))))),s["default"].createElement("table",null,s["default"].createElement("tbody",null,s["default"].createElement("tr",null,s["default"].createElement("td",{className:"edit-expense__field__label"},"Category: ")),s["default"].createElement("tr",null,s["default"].createElement("td",{className:"edit-expense__field__input"},s["default"].createElement("div",{className:"edit-expense__category-picker-wrapper"},s["default"].createElement(d["default"],{categoryList:this.context.store.getState().categoryList,rootCategoryId:this.context.store.getState().rootCategoryId,value:this.state.categoryId,onChange:this.onChangeCategory,editingEnabled:!0,onNewCategory:this.onNewCategory}))))))),s["default"].createElement("div",{className:"edit-expense__controls"},"NEW"===this.state.mode?s["default"].createElement("button",{disabled:0===c["default"].unwrapState(this.state.amount),type:"submit"},"Add"):s["default"].createElement("button",{disabled:0===c["default"].unwrapState(this.state.amount),type:"submit"},"Save"),"EDIT"===this.state.mode?s["default"].createElement("button",{type:"button",onClick:this.onCancel},"Cancel"):null))}});y.contextTypes={store:s["default"].PropTypes.object},a["default"]=y},{"./CategoryPicker.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/CategoryPicker.jsx","./DateTimePicker.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/DateTimePicker.jsx","./NumberInput.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/NumberInput.jsx",moment:"moment",react:"react","react-addons-update":"react-addons-update"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/ExpenseList.jsx":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("react"),s=n(r),o=e("react-addons-update"),i=(n(o),e("input-moment")),l=(n(i),e("moment")),c=n(l),u=e("./money"),d=n(u),f=e("./ModalContainer"),m=(n(f),e("./EditExpense")),p=(n(m),e("./action-creators"),e("./ConfirmDialog")),h=(n(p),s["default"].createClass({displayName:"ExpenseList",render:function(){function e(e,t){for(var a=[],n=null,r=null,s=0;s<e.length;++s){var o=e[s],i=t(o);(null===n||t(o)!==r)&&(n=[],a.push(n)),n.push(o),r=i}return a}function t(e){var a=o.filter(function(t){return t.id===e.parentId})[0];return null!==a.parentId?t(a).concat(e):[e]}var a=this,n=this.props.data,r=this.context.store.getState(),o=r.categoryList,i=r.userSettings,l=i.currency,u=d["default"].format(d["default"].settings.byCurrency[l]),f=n.sort(function(e,t){return t.date-e.date}),m=e(f,function(e){return(0,c["default"])(e.date).format("YYYY MM DD")});return s["default"].createElement("div",{className:"expense-list"},m.map(function(e){var n=(0,c["default"])(e[0].date).format("MMMM Do YYYY (dddd)");return s["default"].createElement("div",{key:n,className:"expense-list__group"},s["default"].createElement("div",{className:"expense-list__group__title"},n),e.map(function(e){var n,r,i=o.filter(function(t){return t.id===e.categoryId})[0];return e.comment?(n=e.comment,r=t(i).map(function(e){return e.title}).join(" / ")):(n=t(i).map(function(e){return e.title}).join(" / "),r=""),s["default"].createElement("div",{key:e.id,className:"expense-list__expense"},s["default"].createElement("div",{className:"expense-list__expense__time"},(0,c["default"])(e.date).format("HH:mm")),s["default"].createElement("div",null,s["default"].createElement("div",{className:"expense-list__expense__first-line"},s["default"].createElement("div",{className:"expense-list__expense__amount"},u(e.amount)),s["default"].createElement("div",{className:"expense-list__expense__desc1"}," "," — ",n)),s["default"].createElement("div",{className:"expense-list__expense__desc2"},r)),s["default"].createElement("div",{className:"expense-list__expense__controls"},s["default"].createElement("a",{href:"#",className:"pseudo warning",onClick:function(t){t.preventDefault(),a.props.onDelete(e.id)}},"Delete"),s["default"].createElement("a",{href:"#",className:"pseudo",onClick:function(t){t.preventDefault(),a.props.onEdit(e.id)}},"Edit")))}))}))}}));h.contextTypes={store:s["default"].PropTypes.object},a["default"]=h},{"./ConfirmDialog":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/ConfirmDialog.jsx","./EditExpense":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/EditExpense.jsx","./ModalContainer":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/ModalContainer.jsx","./action-creators":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/action-creators.js","./money":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/money.js","input-moment":"input-moment",moment:"moment",react:"react","react-addons-update":"react-addons-update"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/History.jsx":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("react"),s=n(r),o=e("react-addons-update"),i=n(o),l=e("input-moment"),c=(n(l),e("moment")),u=n(c),d=e("./ModalContainer"),f=n(d),m=e("./EditExpense"),p=n(m),h=e("./action-creators"),y=e("./ConfirmDialog"),v=(n(y),e("./ExpenseList")),g=n(v),_=e("./CategoryPicker"),E=n(_),C=e("./arrays"),x=Object,b=x.keys,k=s["default"].createClass({displayName:"History",getInitialState:function(){var e=(0,u["default"])();e.startOf("month");var t=e.valueOf();e.endOf("month");var a=e.valueOf();return{editingExpense:!1,deletingExpense:!1,filterDateFrom:t,filterDateTo:a,filterDateItem:e.year()+"-"+e.month(),filterCategory:null,filterComment:""}},onExpenseDelete:function(e){this.props.onDelete(e)},onExpenseEdit:function(e){this.setState((0,i["default"])(this.state,{editingExpense:{$set:!0},editingExpenseId:{$set:e}}))},onCancelEditingExpense:function(){this.setState((0,i["default"])(this.state,{editingExpense:{$set:!1}}))},onExpenseSave:function(e){this.context.store.dispatch((0,h.editExpense)(e)),this.setState((0,i["default"])(this.state,{editingExpense:{$set:!1}}))},onExpenseEditCancel:function(){this.setState((0,i["default"])(this.state,{editingExpense:{$set:!1}}))},onFilterByYearMonth:function(e,t){var a=(0,u["default"])().year(e).month(t);a.startOf("month");var n=a.valueOf();a.endOf("month");var r=a.valueOf();this.setState((0,i["default"])(this.state,{filterDateFrom:{$set:n},filterDateTo:{$set:r},filterDateItem:{$set:e+"-"+t}}))},onFilterByYear:function(e){var t=(0,u["default"])().year(e);t.startOf("year");var a=t.valueOf();t.endOf("year");var n=t.valueOf();this.setState((0,i["default"])(this.state,{filterDateFrom:{$set:a},filterDateTo:{$set:n},filterDateItem:{$set:e}}))},onFilterByCategory:function(e){this.setState((0,i["default"])(this.state,{filterCategory:{$set:e}}))},onFilterByComment:function(e){this.setState((0,i["default"])(this.state,{filterComment:{$set:e.target.value}}))},render:function(){var e=this,t=this.context.store.getState(),a=t.history,n=t.rootCategoryId,r=t.categoryList,o=this.state,i=o.filterDateFrom,l=o.filterDateTo,c=o.filterDateItem,d=o.filterCategory,m=o.filterComment,h={};a.forEach(function(e){var t=(0,u["default"])(e.date).month(),a=(0,u["default"])(e.date).year();a in h||(h[a]=[]),-1==h[a].indexOf(t)&&h[a].push(t)});var y=a.filter(function(e){return e.date>=i&&e.date<=l});return null!==d&&(y=y.filter(function(e){return e.categoryId===d})),""!==m&&(y=y.filter(function(e){return-1!=e.comment.indexOf(m)})),0===a.length?s["default"].createElement("div",{className:"history"},s["default"].createElement("div",{className:"empty-history-msg"},"You have no expenses yet")):s["default"].createElement("div",{className:"history"},s["default"].createElement(f["default"],{visible:this.state.editingExpense,onCancel:this.onCancelEditingExpense},s["default"].createElement(p["default"],{expenseId:this.state.editingExpenseId,onSave:this.onExpenseSave,onCancel:this.onExpenseEditCancel})),s["default"].createElement("div",{className:"history__results"},0!=i&&l!=Number.MAX_VALUE?s["default"].createElement("div",{className:"history__current-filter"},s["default"].createElement("span",{className:"history__current-filter__title"},"Showing records:"),"  ",s["default"].createElement("span",null,(0,u["default"])(i).format("MMMM Do YYYY"))," — ",s["default"].createElement("span",null,(0,u["default"])(l).format("MMMM Do YYYY")),null!==d?s["default"].createElement("span",null,", in category „",r.filter(function(e){return e.id===d})[0].title,"“"):null,""!==m?s["default"].createElement("span",null,", with comment, containing „",m,"“"):null):null,s["default"].createElement(g["default"],{data:y,onEdit:this.onExpenseEdit,onDelete:this.onExpenseDelete})),s["default"].createElement("div",{className:"history__filters"},s["default"].createElement("div",{className:"history__title"},"Filter by date"),s["default"].createElement("div",{className:"history__year-month-filter"},b(h).sort(C.desc).map(function(t){return s["default"].createElement("div",{key:t,className:"history__year-month-filter__year-block"},c===t?s["default"].createElement("div",{className:"history__year-month-filter__item history__year-month-filter__item--active history__year-month-filter__year"},s["default"].createElement("span",null,t,":")):s["default"].createElement("div",{className:"history__year-month-filter__year history__year-month-filter__item"},s["default"].createElement("a",{href:"#",className:"pseudo",onClick:function(a){a.preventDefault(),e.onFilterByYear(t)}},t,":")),h[t].sort(C.desc).map(function(a){var n=(0,u["default"])().month(a).year(t);return c===t+"-"+a?s["default"].createElement("div",{key:a,className:"history__year-month-filter__item history__year-month-filter__month history__year-month-filter__item--active"},s["default"].createElement("span",null,n.format("MMMM"))):s["default"].createElement("div",{key:a,className:"history__year-month-filter__month history__year-month-filter__item"},s["default"].createElement("a",{href:"#",className:"pseudo",onClick:function(n){n.preventDefault(),e.onFilterByYearMonth(t,a)}},n.format("MMMM")))}))}))),s["default"].createElement("div",{className:"history__filters"},s["default"].createElement("div",{className:"history__title"},"Filter by category"),s["default"].createElement("div",{className:"history__category-filter"},s["default"].createElement(E["default"],{rootCategoryId:n,categoryList:r,allowEmpty:!0,emptyText:"Do not filter by category",value:this.state.filterCategory,onChange:this.onFilterByCategory})),s["default"].createElement("div",{className:"history__title"},"Filter by comment"),s["default"].createElement("div",{className:"history__comment-filter"},s["default"].createElement("input",{type:"text",value:this.state.filterComment,onChange:this.onFilterByComment}))))}});k.contextTypes={store:s["default"].PropTypes.object},a["default"]=k},{"./CategoryPicker":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/CategoryPicker.jsx","./ConfirmDialog":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/ConfirmDialog.jsx","./EditExpense":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/EditExpense.jsx","./ExpenseList":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/ExpenseList.jsx","./ModalContainer":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/ModalContainer.jsx","./action-creators":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/action-creators.js","./arrays":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/arrays.js","input-moment":"input-moment",moment:"moment",react:"react","react-addons-update":"react-addons-update"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/ModalContainer.jsx":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("react"),s=n(r),o=s["default"].createClass({displayName:"ModalContainer",onCancel:function(e){e.target===this.refs.root&&this.props.onCancel&&this.props.onCancel(e)},onSave:function(e){13===e.keyCode&&this.props.onSave?this.props.onSave(e):27===e.keyCode&&this.props.onCancel&&this.props.onCancel(e)},render:function(){return this.props.visible!==!1?s["default"].createElement("div",{className:"modal-container",onClick:this.onCancel,ref:"root",onKeyUp:this.onSave},s["default"].createElement("div",{className:"modal-container__column"},s["default"].createElement("div",{className:"modal-container__column__cell"},this.props.children))):null}});a["default"]=o},{react:"react"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/NumberInput.jsx":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("react"),s=n(r),o=e("./numbers"),i=s["default"].createClass({displayName:"NumberInput",propTypes:{value:s["default"].PropTypes.shape({number:s["default"].PropTypes.number.isRequired,text:s["default"].PropTypes.string.isRequired})},getDefaultProps:function(){return{number:0,text:""}},onChange:function(e){var t=e.target.value;t=t.replace(/\s/g,""),t=t.replace(/,/g,"."),t=/^0[0-9]+/.test(t)?t.substring(1):t,(0,o.isNumber)(t)&&this.props.onChange({text:t,number:(0,o.getNumber)(t)})},getValue:function(){return(0,o.getNumber)(this.state.value)},setValue:function(e){(0,o.isNumber)(e)&&this.setState({value:e})},render:function(){return s["default"].createElement("input",{value:this.props.value.text,
onChange:this.onChange})}});i.wrapState=function(e){e=parseFloat(e);var t=0===e?"":""+e;return{number:e,text:t}},i.unwrapState=function(e){return e.number},a["default"]=i},{"./numbers":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/numbers.js",react:"react"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/Root.jsx":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("react"),s=n(r),o=e("moment"),i=(n(o),e("react-addons-update")),l=n(i),c=e("./action-creators.js"),u=e("./NumberInput.jsx"),d=(n(u),e("./EditExpense.jsx")),f=n(d),m=e("./TabsContainer.jsx"),p=n(m),h=e("./WaitIndicator.jsx"),y=n(h),v=e("./History.jsx"),g=n(v),_=e("./Statistics.jsx"),E=n(_),C=e("./Settings"),x=n(C),b=e("./UserPanel"),k=n(b),j=s["default"].createClass({displayName:"Root",getInitialState:function(){return{activeTab:"Add expense"}},componentDidMount:function(){var e=this;this.unsubscribe=this.context.store.subscribe(function(){e.forceUpdate()})},componentUnmount:function(){this.unsubscribe()},onAdd:function(e){this.context.store.dispatch((0,c.newExpense)(e))},onAddCategory:function(e){this.context.store.dispatch((0,c.newCategory)(e))},onDelete:function(e){this.context.store.dispatch((0,c.deleteExpense)(e))},onSwitchTab:function(e){this.setState((0,l["default"])(this.state,{activeTab:{$set:e}}))},render:function(){var e,t=this.context.store,a=t.getState(),n=a.error,r=a.history,o=a.waiting;if("UNAUTHORIZED"===n)e=s["default"].createElement("div",{className:"unauthorized"},s["default"].createElement("div",{className:"unauthorized__caption"},"To use this application you should be authorized with Google Account"),s["default"].createElement("div",{className:"unauthorized__button"},s["default"].createElement("a",{href:window.context.backend_url+"/login?redirect="+encodeURIComponent(window.location.href)},s["default"].createElement("img",{className:"unhovered",src:"images/google_signin_buttons/web/1x/btn_google_signin_light_normal_web.png"}))));else{var i={};0===r.length&&(i.History="You have no expenses yet",i.Statistics="You have no expenses yet"),e=s["default"].createElement("div",null,s["default"].createElement(p["default"],{titleList:["Add expense","History","Statistics","Settings"],active:this.state.activeTab,onSwitch:this.onSwitchTab,disabled:i},s["default"].createElement("div",null,s["default"].createElement(f["default"],{onAdd:this.onAdd})),s["default"].createElement("div",null,s["default"].createElement(g["default"],{onDelete:this.onDelete})),s["default"].createElement("div",null,s["default"].createElement(E["default"],null)),s["default"].createElement("div",null,s["default"].createElement(x["default"],null))),s["default"].createElement(y["default"],{waiting:o}),s["default"].createElement(k["default"],null))}return s["default"].createElement("div",null,s["default"].createElement("div",{className:"logo"},s["default"].createElement("span",{className:"logo__title__span"},"MONEYTRACK")),e)}});j.contextTypes={store:s["default"].PropTypes.object},a["default"]=j},{"./EditExpense.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/EditExpense.jsx","./History.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/History.jsx","./NumberInput.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/NumberInput.jsx","./Settings":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/Settings.jsx","./Statistics.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/Statistics.jsx","./TabsContainer.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/TabsContainer.jsx","./UserPanel":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/UserPanel.jsx","./WaitIndicator.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/WaitIndicator.jsx","./action-creators.js":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/action-creators.js",moment:"moment",react:"react","react-addons-update":"react-addons-update"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/Settings.jsx":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("react"),s=n(r),o=e("react-addons-update"),i=n(o),l=e("./TabsContainer"),c=n(l),u=e("./UserSettings"),d=n(u),f=e("./EditCategoryList"),m=n(f),p=e("./action-creators.js"),h=s["default"].createClass({displayName:"Settings",getInitialState:function(){return{active:"Categories"}},onNewCategory:function(e,t){this.context.store.dispatch((0,p.newCategory)({title:e,parentId:t}))},onRenameCategory:function(e,t){this.context.store.dispatch((0,p.editCategory)({id:e,title:t}))},onMoveCategory:function(e,t){this.context.store.dispatch((0,p.editCategory)({id:e,parentId:t}))},onDeleteCategory:function(e){this.context.store.dispatch((0,p.deleteCategory)({id:e}))},onSwitch:function(e){this.setState((0,i["default"])(this.state,{active:{$set:e}}))},render:function(){return s["default"].createElement("div",{className:"statistics"},s["default"].createElement(c["default"],{titleList:["Categories","User settings"],active:this.state.active,onSwitch:this.onSwitch},s["default"].createElement(m["default"],{onNewCategory:this.onNewCategory,onRenameCategory:this.onRenameCategory,onMoveCategory:this.onMoveCategory,onDeleteCategory:this.onDeleteCategory}),s["default"].createElement(d["default"],null)))}});h.contextTypes={store:s["default"].PropTypes.object},a["default"]=h},{"./EditCategoryList":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/EditCategoryList.jsx","./TabsContainer":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/TabsContainer.jsx","./UserSettings":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/UserSettings.jsx","./action-creators.js":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/action-creators.js",react:"react","react-addons-update":"react-addons-update"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/Statistics.jsx":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("react"),s=n(r),o=e("react-addons-update"),i=(n(o),e("moment")),l=(n(i),e("./SumTableStatistics")),c=n(l),u=s["default"].createClass({displayName:"Statistics",render:function(){var e=this.context.store.getState(),t=e.history;return 0===t.length?s["default"].createElement("div",{className:"sum-table-statistics"},s["default"].createElement("div",{className:"empty-history-msg"},"You have no expenses yet")):s["default"].createElement("div",{className:"statistics"},s["default"].createElement(c["default"],null))}});u.contextTypes={store:s["default"].PropTypes.object},a["default"]=u},{"./SumTableStatistics":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/SumTableStatistics.jsx",moment:"moment",react:"react","react-addons-update":"react-addons-update"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/SumTableStatistics.jsx":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(a,"__esModule",{value:!0});var s=e("react"),o=n(s),i=e("react-addons-update"),l=n(i),c=e("moment"),u=n(c),d=e("./TabsContainer"),f=n(d),m=e("./money"),p=n(m),h=e("./arrays"),y=p["default"].format(),v=Object,g=v.keys,_=o["default"].createClass({displayName:"SumTableStatistics",getInitialState:function(){var e=Object.keys(this.getYearMonthCategoryExpenseMap()).map(function(e){return parseInt(e)}).sort(h.desc);return{activeYear:e[0],showChild:!1,showAtRoot:!1,showDif:!1}},getYearMonthCategoryExpenseMap:function(){var e=this.context.store.getState(),t=e.history,a=(e.categoryList,{});return t.forEach(function(e){var t=(0,u["default"])(e.date).month(),n=(0,u["default"])(e.date).year(),r=e.categoryId;n in a||(a[n]=[]),t in a[n]||(a[n][t]=[]),r in a[n][t]||(a[n][t][r]=[]),a[n][t][r].push(e)}),a},onChangeChild:function(e){this.setState((0,l["default"])(this.state,{showChild:{$set:!this.state.showChild}}))},onChangeShotAtRoot:function(e){this.setState((0,l["default"])(this.state,{showAtRoot:{$set:!this.state.showAtRoot}}))},onChangeShotDif:function(e){this.setState((0,l["default"])(this.state,{showDif:{$set:!this.state.showDif}}))},render:function(){function e(t,a,n){var r=d.filter(function(e){return e.parentId===a.id}),s=r.map(function(a){return e(t,a,n)}).reduce(function(e,t){return e+t},0),o=r.map(function(e){return t[e.id][n]}).reduce(function(e,t){return e+t},0);return o+s}function t(e){var t={};return Object.keys(e).forEach(function(a){Object.keys(e[a]).forEach(function(n){t[n]||(t[n]=0),t[n]+=e[a][n]})}),o["default"].createElement("tr",{key:"total"},o["default"].createElement("td",{className:"sum-table-statistics__year__total__title"},"Total:"),Object.keys(t).sort(p).map(function(e){var a=t[e],n=t[e-1],r=n?a-n:null;return o["default"].createElement("td",{key:e,className:"sum-table-statistics__year__total__value"},y(a),v(r))}))}function a(e){var a=[],n=d.filter(function(e){return e.parentId===m});return n.forEach(function(t){a.push.apply(a,r(_(e,t,0)))}),a.push(t(e)),a}function n(e){var t={};return d.forEach(function(a){t[a.id]={},Object.keys(e).sort(p).map(function(n){var r=e[n],s=r[a.id]||[],o=s.reduce(function(e,t){return e+t.amount},0);t[a.id][n]=o})}),t}var s=this,i=this.context.store.getState(),c=i.history,d=i.categoryList,m=i.rootCategoryId,p=function(e,t){return e-t},h=this.getYearMonthCategoryExpenseMap(),v=function(e){return s.state.showDif?e?e>0?o["default"].createElement("div",{className:"sum-table-statistics__year__value__dif sum-table-statistics__year__value__dif--plus"},"+"+y(e)):o["default"].createElement("div",{className:"sum-table-statistics__year__value__dif sum-table-statistics__year__value__dif--minus"},"-"+y(-e)):o["default"].createElement("div",{className:"sum-table-statistics__year__value__dif sum-table-statistics__year__value__dif--zero"},"0"):o["default"].createElement("div",null)},_=function E(t,a,n){var i=[],l=t[a.id];return i.push(o["default"].createElement("tr",{key:a.id},o["default"].createElement("td",{style:{paddingLeft:20*n+"px"},className:"sum-table-statistics__year__category"},a.title),g(l).sort(p).map(function(n){var r=l[n]+e(t,a,n),s=null;if(l[n-1]){var i=l[n-1]+e(t,a,n-1);s=i?r-i:null}return o["default"].createElement("td",{key:a.id+"-"+n,className:"sum-table-statistics__year__value"},y(r),v(s))}))),s.state.showChild&&!function(){var e=[];d.filter(function(e){return e.parentId===a.id}).forEach(function(a){e.push.apply(e,r(E(t,a,n+1)))}),s.state.showAtRoot&&e.unshift(o["default"].createElement("tr",{key:a.id+"-self"},o["default"].createElement("td",{style:{paddingLeft:20*(n+1)+"px"},className:"sum-table-statistics__year__category"},"(at root)"),g(l).sort(p).map(function(e){var t=l[e],n=l[e-1],r=n?t-n:null;return o["default"].createElement("td",{key:a.id+"-"+e,className:"sum-table-statistics__year__value"},y(t),v(r))}))),i.push.apply(i,e)}(),i};return 0===c.length?o["default"].createElement("div",{className:"sum-table-statistics"},o["default"].createElement("div",{className:"empty-history-msg"},"You have no expenses yet")):o["default"].createElement(f["default"],{className:"sum-table-statistics",titleList:Object.keys(h).sort(p),active:(this.state.activeYear||"").toString(),onSwitch:function(e){s.setState((0,l["default"])(s.state,{activeYear:{$set:e}}))}},Object.keys(h).sort(p).map(function(e){var t=n(h[e]);return o["default"].createElement("div",{key:e},o["default"].createElement("div",null,o["default"].createElement("label",null,o["default"].createElement("input",{type:"checkbox",checked:s.state.showChild,onChange:s.onChangeChild})," show child categories"),o["default"].createElement("label",null,o["default"].createElement("input",{type:"checkbox",disabled:!s.state.showChild,checked:s.state.showAtRoot,onChange:s.onChangeShotAtRoot})," show 'at root'"),o["default"].createElement("label",null,o["default"].createElement("input",{type:"checkbox",checked:s.state.showDif,onChange:s.onChangeShotDif})," show difference")),o["default"].createElement("table",{className:"sum-table-statistics__year"},o["default"].createElement("tbody",null,o["default"].createElement("tr",null,o["default"].createElement("td",null),g(h[e]).sort(p).map(function(t){var a=(0,u["default"])().year(parseInt(e)).month(parseInt(t));return o["default"].createElement("td",{key:e+"-"+t,className:"sum-table-statistics__year__month"},a.format("MMMM"))})),a(t))))}))}});_.contextTypes={store:o["default"].PropTypes.object},a["default"]=_},{"./TabsContainer":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/TabsContainer.jsx","./arrays":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/arrays.js","./money":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/money.js",moment:"moment",react:"react","react-addons-update":"react-addons-update"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/TabsContainer.jsx":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("react"),s=n(r),o=s["default"].createClass({displayName:"TabsContainer",propTypes:{titleList:s["default"].PropTypes.arrayOf(s["default"].PropTypes.string),active:s["default"].PropTypes.string,checkTitleAndChildrenCount:function(e){if(e.titleList.length!==s["default"].Children.count(e.children))throw new Error("Length of titleList property and children count should be equal")}},onClick:function(e){var t=this;return function(a){a.preventDefault(),t.props.onSwitch(e)}},render:function(){var e=this,t=this.props.disabled||{},a=this.props.titleList.indexOf(this.props.active),n="tabs-container"+(this.props.className?" "+this.props.className:"");return s["default"].createElement("div",{className:n},s["default"].createElement("div",{className:"tabs-container__labels"},this.props.titleList.map(function(a){return a===e.props.active?s["default"].createElement("span",{key:a,className:"tabs-container__labels__label tabs-container__labels__label--active"},a):t[a]?s["default"].createElement("span",{key:a,className:"tabs-container__labels__label tabs-container__labels__label--disabled",title:t[a]},a):s["default"].createElement("span",{key:a,className:"tabs-container__labels__label"},s["default"].createElement("a",{href:"#",className:"pseudo",title:t[a],onClick:e.onClick(a)},a))})),s["default"].createElement("div",{className:"tabs-container__content"},s["default"].Children.map(this.props.children,function(e,t){return t===a?e:null})))}});o.contextTypes={store:s["default"].PropTypes.object},a["default"]=o},{react:"react"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/UserPanel.jsx":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("react"),s=n(r),o=s["default"].createClass({displayName:"UserPanel",render:function(){return s["default"].createElement("div",{className:"user-panel"},s["default"].createElement("a",{href:"/logout"},"Logout"))}});a["default"]=o},{react:"react"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/UserSettings.jsx":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("react"),s=n(r),o=e("react-addons-update"),i=(n(o),e("./action-creators")),l=s["default"].createClass({displayName:"UserSettings",onChangeCurrency:function(e){this.context.store.dispatch((0,i.setCurrency)({currency:e.target.value}))},render:function(){var e=this.context.store.getState().userSettings.currency;return s["default"].createElement("table",null,s["default"].createElement("tbody",null,s["default"].createElement("tr",null,s["default"].createElement("td",null,s["default"].createElement("label",null,"Currency:")),s["default"].createElement("td",null,s["default"].createElement("select",{value:e,onChange:this.onChangeCurrency},s["default"].createElement("option",{value:"USD"},"U.S. dollars"),s["default"].createElement("option",{value:"EUR"},"Euro"),s["default"].createElement("option",{value:"RUR"},"Russian rubles"))))))}});l.contextTypes={store:s["default"].PropTypes.object},a["default"]=l},{"./action-creators":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/action-creators.js",react:"react","react-addons-update":"react-addons-update"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/WaitIndicator.jsx":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("react"),s=n(r),o=s["default"].createClass({displayName:"WaitIndicator",render:function(){return this.props.waiting?s["default"].createElement("div",{className:"wait-indicator"},"Please, wait..."):null}});a["default"]=o},{react:"react"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/action-creators.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){return function(t){t({type:"WAIT"}),o["default"].post(i,e(null)).then(function(a){t({type:"STOP_WAIT"}),t(e(a))},function(a){t({type:"STOP_WAIT"}),t(e(a))})}}Object.defineProperty(a,"__esModule",{value:!0}),a.setCurrency=a.deleteCategory=a.editCategory=a.newCategory=a.deleteExpense=a.editExpense=a.newExpense=void 0;var s=e("./ajax"),o=n(s),i=window.context.backend_url+"/dispatch";a.newExpense=function(e){var t=e.amount,a=e.categoryId,n=e.comment,s=e.date;return r(function(e){return{type:"NEW_EXPENSE",amount:t,categoryId:a,comment:n,id:e,date:s}})},a.editExpense=function(e){var t=e.id,a=e.amount,n=e.categoryId,s=e.comment,o=e.date;return r(function(){return{type:"EDIT_EXPENSE",id:t,amount:a,categoryId:n,comment:s,date:o}})},a.deleteExpense=function(e){return r(function(t){return{type:"DELETE_EXPENSE",id:e}})},a.newCategory=function(e){var t=e.title,a=e.parentId;return r(function(e){return{type:"NEW_CATEGORY",id:e,title:t,parentId:a}})},a.editCategory=function(e){var t=e.id,a=e.title,n=void 0===a?null:a,s=e.parentId,o=void 0===s?null:s;return r(function(e){return{type:"EDIT_CATEGORY",id:t,title:n,parentId:o}})},a.deleteCategory=function(e){var t=e.id;return r(function(e){return{type:"DELETE_CATEGORY",id:t}})},a.setCurrency=function(e){var t=e.currency;return r(function(e){return{type:"SET_CURRENCY",currency:t}})}},{"./ajax":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/ajax.js"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/ajax.js":[function(e,t,a){"use strict";var n=e("es6-promise");t.exports.get=function(e){var t=void 0;return new n.Promise(function(a,n){t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t.onreadystatechange=function(){if(t.readyState==XMLHttpRequest.DONE)if(200==t.status)if(t.responseText)try{a(JSON.parse(t.responseText))}catch(e){console.error("Response text is not null, but it's not a valid JSON: "+t.responseText),a(null)}else a(null);else n({code:t.status,responseText:t.responseText})},t.withCredentials=!0,t.open("GET",e,!0),t.send()})},t.exports.post=function(e,t){return new n.Promise(function(a,n){var r=void 0;r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),r.onreadystatechange=function(){if(r.readyState==XMLHttpRequest.DONE)if(200==r.status)if(r.responseText)try{a(JSON.parse(r.responseText))}catch(e){console.error("Response text is not null, but it's not a valid JSON: "+r.responseText),a(null)}else a(null);else n({code:r.status,responseText:r.responseText})},r.open("POST",e,!0),r.send(JSON.stringify(t))})}},{"es6-promise":"es6-promise"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/arrays.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.asc=function(e,t){return e>t?1:t>e?-1:0},a.desc=function(e,t){return t>e?1:e>t?-1:0},a.find=function(e,t){return e.filter(t)[0]}},{}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/main.jsx":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var s=e("es6-promise"),o=e("react"),i=n(o),l=e("react-dom"),c=n(l),u=e("react-addons-update"),d=n(u),f=e("redux"),m=e("redux-logger"),p=n(m),h=e("redux-thunk"),y=n(h),v=e("react-redux"),g=e("moment"),_=n(g),E=e("./ajax"),C=n(E),x=e("./Root.jsx"),b=n(x),k=(e("./arrays"),window.context.backend_url+"/dispatch");C["default"].get(k).then(function(e){return e},function(e){return console.error(e),console.error("Failed to load state, use default state"),s.Promise.resolve({error:"UNAUTHORIZED"})}).then(function(e){var t=function(){var t=arguments.length<=0||void 0===arguments[0]?e:arguments[0],a=arguments[1],n=a.type;a.status;switch(n){case"WAIT":return(0,d["default"])(t,{waiting:{$set:!0}});case"STOP_WAIT":return(0,d["default"])(t,{waiting:{$set:!1}});case"NEW_EXPENSE":var s=function(){var e=parseFloat(a.amount),n=parseInt(a.categoryId),r=a.comment,s=a.id,o=(0,_["default"])(a.date).valueOf(),i=!isNaN(e)&&t.categoryList.filter(function(e){return e.id===n}).length>0;return i?{v:(0,d["default"])(t,{history:{$push:[{id:s,amount:e,categoryId:n,comment:r,date:o}]}})}:void console.error("Invalid action",a)}();if("object"===("undefined"==typeof s?"undefined":r(s)))return s.v;break;case"EDIT_EXPENSE":var o=function(){var e=a.id,n=parseFloat(a.amount),r=parseInt(a.categoryId),s=a.comment,o=(0,_["default"])(a.date).valueOf(),i=t.history.map(function(t){return t.id===e?{id:e,amount:n,categoryId:r,comment:s,date:o}:t});return{v:(0,d["default"])(t,{history:{$set:i}})}}();if("object"===("undefined"==typeof o?"undefined":r(o)))return o.v;break;case"DELETE_EXPENSE":return(0,d["default"])(t,{history:{$set:t.history.filter(function(e){return e.id!==a.id})}});case"NEW_CATEGORY":var i=function(){var e=parseFloat(a.id),n=a.title,r=a.parentId,s={id:e,title:n,parentId:r,childIdList:[]},o=t.categoryList.map(function(t){return t.id===r?(0,d["default"])(t,{childIdList:{$push:[e]}}):t});return o=o.concat([s]),{v:(0,d["default"])(t,{categoryList:{$set:o}})}}();if("object"===("undefined"==typeof i?"undefined":r(i)))return i.v;break;case"EDIT_CATEGORY":var l=function(){var e=parseFloat(a.id),n=a.title,r=a.parentId,s=t.categoryList;return null!==n&&(s=s.map(function(t){return t.id===e?(0,d["default"])(t,{title:{$set:n}}):t})),null!==r&&!function(){var a=t.categoryList.filter(function(t){return t.id==e})[0],n=a.parentId;n!==r&&(s=s.map(function(t){if(t.id===e)return(0,d["default"])(t,{parentId:{$set:r}});if(t.id===n){var a=t.childIdList.filter(function(t){return t!==e});return(0,d["default"])(t,{childIdList:{$set:a}})}if(t.id===r){var a=t.childIdList.concat([e]);return(0,d["default"])(t,{childIdList:{$set:a}})}return t}))}(),{v:(0,d["default"])(t,{categoryList:{$set:s}})}}();if("object"===("undefined"==typeof l?"undefined":r(l)))return l.v;break;case"DELETE_CATEGORY":var c=function(){var e=a.id,n=t.categoryList.filter(function(t){return t.id==e})[0],r=n.parentId,s=t.categoryList.filter(function(t){return t.id!==e}).map(function(e){return e.id===r?(0,d["default"])(e,{childIdList:{$set:e.childIdList.filter(function(e){return e!==a.id})}}):e});return{v:(0,d["default"])(t,{categoryList:{$set:s}})}}();if("object"===("undefined"==typeof c?"undefined":r(c)))return c.v;break;case"SET_CURRENCY":var u=a.currency;return(0,d["default"])(t,{userSettings:{currency:{$set:u}}});default:console.warn("Unhandled action",a)}return t},a=(0,f.applyMiddleware)(y["default"],(0,p["default"])())(f.createStore)(t);c["default"].render(i["default"].createElement(v.Provider,{store:a},i["default"].createElement(b["default"],null)),document.getElementById("react"))},function(e){console.error(e)})["catch"](function(e){console.error(e)})},{"./Root.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/Root.jsx","./ajax":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/ajax.js","./arrays":"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/arrays.js","es6-promise":"es6-promise",moment:"moment",react:"react","react-addons-update":"react-addons-update","react-dom":"react-dom","react-redux":"react-redux",redux:"redux","redux-logger":"redux-logger","redux-thunk":"redux-thunk"}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/money.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]={format:function(e){return function(t){e=e||{};for(var a=e.groupDelim||" ",n=e.decimalDelim||".",r=e.currency||"",s=e.currencyBefore||!1,o="",i=parseInt(t/100),l=parseInt(t%100);i>=1e3;){var c=i%1e3;o=c+o,100>c&&(o="0"+o),10>c&&(o="0"+o),o=a+o,i=parseInt(i/1e3)}return o=i+o,o+=n,10>l&&(o+="0"),o+=l,s?o=r+o:o+=r,o}},settings:{byCurrency:{USD:{currency:"$",currencyBefore:!0},EUR:{currency:" "+String.fromCharCode(parseInt("8364"))},RUR:{currency:" "+String.fromCharCode(parseInt("8381"))}}}}},{}],"/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/numbers.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.isNumber=function(e){return/^[0-9]*([,.][0-9]*)?$/.test(e)?!0:void 0},a.getNumber=function(e){return""===e||"."===e||","===e?0:parseFloat(e)}},{}]},{},["/Users/koluch/Dropbox/dev/js/moneytrack/frontend/src/scripts/main.jsx"]);